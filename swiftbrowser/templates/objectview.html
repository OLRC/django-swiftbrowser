{% extends "base.html" %}
{% load l10n %}
{% load i18n %}
{% load dateconv %}
{% load lastpart %}
{% block content %}
<div id='containerdiv' class="container">
{% include "messages.html" %}
<div class="row">

<div class="col-xs-12 col-sm-8">
		<ul class="breadcrumb">
            <li><a href="{% url "containerview" %}">Containers</a></li>
            <li>
                <a class="u" href="{% url "objectview" container=container %}">{{container}}</a></li>

            {% for prefix in prefixes %}
                <li>
                    <a href="{% url "objectview" container=container prefix=prefix.full_name %}">{{prefix.display_name}}</a>
                </li>
            {% endfor %}

       </ul>
</div>
<div class="col-xs-12 col-sm-4 action-btns">
<button type="button" class="btn btn-success" data-toggle="modal" data-target="#fileForm">Upload Files</button>
                {% if prefix %}
                    <a href="{% url "create_pseudofolder" container=container prefix=prefix %}" class="btn btn-primary" role="button">
                {% else %}
                    <a href="{% url "create_pseudofolder" container=container %}" class="btn btn-primary" role="button">
                {% endif %}
                        New Folder
                    </a>
</div>
</div>
    {% if public %}

        <div class="alert alert-info">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>{% trans 'Public URL:' %}</strong>
            <a href="{{ base_url }}{% url "public_objectview" account=account container=container %}" target="new">
                {{ base_url }}{% url "public_objectview" account=account container=container %}
            </a>
        </div>

    {% endif %}
	<div>
	<script type="text/javascript">
		$( document ).ready(function() {
			loadTable();

		}
		);

		function loadTable() {
		$.ajax({
		  url: '{% url "objecttable" %}',
		  success: function(data) {
		  $('#objecttable').html(data);
		  }
		});

	}

	</script>
<!--
	<form
	    id="fileupload" action="{{ swift_url }}"
	    method="POST" enctype="multipart/form-data">

				<input type="hidden" name="redirect" value="{{redirect_url}}" />
			    <input type="hidden" name="max_file_size" value="{{ max_file_size }}" />
			    <input type="hidden" name="max_file_count" value="{{ max_file_count }}" />
			    <input type="hidden" name="expires" value="{{ expires }}" />
			    <input type="hidden" name="signature" value="{{ signature }}" />
				<input type="file" name="file1" /><br />
				<input type="submit" />
			</form>
	{% include "cors.html" %}
-->

	<div class="modal fade " id="fileForm" tabindex="-1" role="dialog" aria-labelledby="fileFormLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="fileFormLabel">Add files</h4>
	      </div>
		   {% load jfutags %}
		   {% comment %}
		   		Passing in login as arbitrary upload handler since no server side
		   		upload handler is actually used.
		   {% endcomment %}
		   {% jfu 'upload_form.html' 'login'%}
	    </div>
	  </div>
	</div>


	</div>

<div id="objecttable">
</div>
</div>
{% endblock %}
{% block jsadd %}
	<script type="text/javascript">
		$('input[id=file]').change(function() { $('#filetmp').val($(this).val()); });
	</script>
{% endblock %}

