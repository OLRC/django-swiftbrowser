{% extends "base.html" %}
{% load l10n %}
{% load i18n %}
{% load dateconv %}
{% load lastpart %}
{% block content %}
<div id='objectview'>
<div class="row">
	<div class="small-12 columns">
		{% include "messages.html" %}
	</div>
</div>
<div class="row">
	<div class="small-12 large-8 columns">
		<ul class="breadcrumbs">
			<li><a href="{% url "containerview" %}">Containers</a></li> 
			<li>
				<a href="{% url "objectview" container=container %}">{{container}}</a>
			</li>
			{% for prefix in prefixes %}
			<li>
				<a href="{% url "objectview" container=container prefix=prefix.full_name %}">{{prefix.display_name}}</a>
			</li>
			{% endfor %}
		</ul>
</div>
<div class="row">
	<div class="small-12 large-4 columns">		
		<button type="button" data-reveal-id="fileForm" class="button">Upload Files</button>
		<button type="button" data-reveal-id="pseudoContainer" class="button">New Folder</button>
	</div>
</div>
</div> 
{% if public %}
<div class="row">
<div class="small-12 columns">
	<div data-alert class="alert-box secondary">
		<strong>{% trans 'Public URL:' %}</strong>
		<a href="{{ base_url }}{% url "public_objectview" account=account container=container %}" target="new">
			{{ base_url }}{% url "public_objectview" account=account container=container %}
		</a>
		<a href="#" class="close">&times;</a>
	</div>
</div> 
</div>
{% endif %}
<div class="row">
	<div class="small-12 columns">
		<script type="text/javascript">
			$( document ).ready(function() {
				loadTable();
				
			});
			function loadTable() {
				$.ajax({
					url: '{% url "objecttable" %}',
					success: function(data) {
						$('#objecttable').html(data);
						$(document).foundation();
					}
				});	
			}
		</script>
		<div id="objecttable"></div>
	</div>
</div>
<div class="reveal-modal" id="fileForm" data-reveal aria-labelledby="fileForm-title" aria-hidden="true" role="dialog">
	<h2 id="fileForm-title">Add Files</h2>
	<a class="close-reveal-modal" aria-label="Close">&#215;</a>
	{% load jfutags %}
	{% jfu 'upload_form.html' %}
</div>
<div class="reveal-modal" id="pseudoContainer" data-reveal aria-labelledby="pseudoContainer-title" aria-hidden="true" role="dialog">
	
	<h2 id="pseudoContainer-title">Add Files</h2>
	
	<div id="pfold">
		{% include "create_pseudofolder.html" %}
	</div>
	
	
	
</div>
</div>
{% endblock %}
{% block jsadd %}

<script type="text/javascript"> 		
	$('input[id=file]').change(function() { $('#filetmp').val($(this).val()); });
</script> 
{% endblock %}

