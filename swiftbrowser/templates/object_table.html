{% load i18n %}
{% load dateconv %}
{% load lastpart %}
{% block content %}
<table>
	<thead>
		<tr>
			<th style="width: 32px;" class="hidden-phone"></th>
			<th>{% trans 'Name' %}</th>
			<th style="width: 12.5em;" class="hidden-phone">{% trans 'Created' %}</th>
			<th style="width: 6em;" class="hidden-phone">{% trans 'Size' %}</th>
			<th style="width: 1em;"></th>
		</tr>
	</thead>
	{% if folders or objects %}
	<tbody>
		{% for folder in folders %}
		<tr>
			<td class="hidden-phone">
				<span class="glyphicons glyphicons-folder-closed"></span>
			</td>
			<td>
				<a href="{% url "objectview" container=container prefix=folder.0 %}">
					<strong>{{folder.0|lastpart}}</strong>
				</a>
			</td>
			<td></td>
			<td></td>
			<td>
				<button type="button" data-dropdown="opt{{forloop.counter}}" aria-controls="opt{{forloop.counter}}" aria-expanded="false" class="button dropdown"><span class="glyphicons glyphicons-cogwheel"></span></button><br>
				<ul id="opt{{forloop.counter}}" data-dropdown-content class="f-dropdown right" aria-hidden="true">
					<li>
						<a href="{% url "download_collection" container=container prefix=folder.0 %}">
							<span class="glyphicons glyphicons-cloud-download"></span> {% trans 'Download' %}
						</a>
					</li>
					<li>
						<a href="{% url "download_collection_nonrec" container=container prefix=folder.0  %}">
							<span class="glyphicons glyphicons-cloud-download"></span> {% trans 'Download nonrecursive' %}
						</a>
					</li>
					<li>
						<script>
						function double_confirm() {
							var confirm1 = confirm('{% trans 'Delete folder' %} {{folder.1}}?');
							if (confirm1) {
								var confirm2 = confirm('Deleting this folder will delete everything in the folder. Are you sure?');
								if (confirm2) {
									return true;
								} else {
									return false;
								}
							} else {
								return false;
							}
						}
						</script>
						<a href="{% url "delete_folder" container=container objectname=folder.1 %}" onclick="return double_confirm()" >
							<span class="glyphicons glyphicons-fire"></span> {% trans 'Delete folder' %}
						</a>
					</li>
					{% comment %}
					{%
						<li>
							<a href="{% url "move_collection_to_trash" container=container prefix=folder.1  %}">
								<span class="glyphicons glyphicons-bin"></span> {% trans 'Move to trash' %}
							</a>
						</li>%}
						{% endcomment %}
				</ul>
			</td>
		</tr>
		{% endfor %}
		{% for key in objects %}
		<tr>
			{% comment %}
			{% <td>
				{% ifequal  key.content_type|slice:":6" "image/" %}
				<img src="{% url "serve_thumbnail"  container=container objectname=key.name %}"width="32" height="32">
				{% endifequal %}
			</td> %}
			{% endcomment %}
			<td>
				<span class="glyphicons glyphicons-file"></span>
			</td>
			<td>
				<a href="{% url "download" container=container objectname=key.name %}" class="block">{{key.name|lastpart}}</a>
			</td>
			<td class="hidden-phone">{{key.last_modified|dateconv|date:"SHORT_DATETIME_FORMAT"}}</td>
			<td class="hidden-phone">{{key.bytes|filesizeformat}}</td>
			<td>
				<button type="button" data-dropdown="file-opt{{forloop.counter}}" aria-controls="file-opt{{forloop.counter}}" aria-expanded="false" class="button dropdown"><span class="glyphicons glyphicons-cogwheel"></span></button><br>
				<ul id="file-opt{{forloop.counter}}" data-dropdown-content class="f-dropdown right" aria-hidden="true">
						<li>
							<a href="{% url "tempurl" container=container objectname=key.name %}" id="tempurllink">
								<span class="glyphicons glyphicons-clock"></span> {% trans 'Temporary URL' %}
							</a>
						</li>
			
						<li>
							<a href="{% url "delete_object" container=container objectname=key.name  %}" onclick="return confirm('{% trans 'Delete object' %} {{key.name}}?');" >
								<span class="glyphicons glyphicons-fire"></span> {% trans 'Delete Object' %}
							</a>
						</li>
						{% comment %}
						{% <li>
							<a href="{% url "move_to_trash" container=container objectname=key.name  %}">
								<span class="glyphicons glyphicons-bin"></span> {% trans 'Move to trash' %}
							</a>
						</li> %}
						{% endcomment %}
					</ul>
				
			</td>
		</tr>
		{% endfor %}
	</tbody>
	{% else %}
	<tbody>
		<tr>
			<th colspan="5" class="center">
				<strong>
					<center>
						{% trans 'There are no objects in this container yet. Upload new objects by clicking the red button.' %}
					<center>
				</strong>
			</th>
		</tr>
	</tbody>
	{% endif %}
	{% comment %}
	{% <tfoot>
		<tr>
			<td>
				<a href="{% url "trashview" account=account %}" role="button" class="btn btn-mini">
					<span class="glyphicons glyphicons-bin"></span>
				</a>
			</td>
			<td colspan="5"></td>
		</tr>
		</tfoot> %}
		{% endcomment %}
</table>
{% endblock %}
